define("hawk.client",function(){return function(e){var t,r,n;return t=function(){return function(e,t,n,a){var i,o,s,u,c,h;for(n=n.split("/"),i=n.pop(),i||(h=!0,i=n.pop()),("."===i||".."===i)&&(n.push(i),i="");o=n.shift();)if(".."===o)e=t.pop();else if("."!==o&&(t.push(e),e=e[o],!e))throw Error("Could not find module '"+a+"'");if(i?(!h&&e[i+".js"]&&(i+=".js"),"object"==typeof e[i]&&(t.push(e),e=e[i],i="index.js")):i="index.js",c=e[i],!c)throw Error("Could not find module '"+a+"'");return c.hasOwnProperty("module")?c.module.exports:(s={},c.module=u={exports:s},c.call(s,s,u,r(e,t)),u.exports)}}(function(e){return function(t,r){r.exports=e.exports}}),n=function(r,n,a){var i,o=a,s=a.charAt(0);return"/"===s?(o=o.slice(1),r=e["/"],n=[]):"."!==s&&(i=o.split("/",1)[0],r=e[i],n=[],o=o.slice(i.length+1)||r[":mainpath:"]),t(r,n,o,a)},r=function(e,t){return function(r){return n(e,[].concat(t),r)}},r(e,[])}({hawk:{"index.js":function(e,t,r){t.exports=r("./lib/hawk")},lib:{"crypto.js":function(e,t,r){function n(e){return i.enc.Utf8.parse(e).toString(i.enc.Base64)}var a=r("./httpError"),i=r("./cryptoJS");r("./utils"),e.headerVersion="1",e.algorithms=["SHA1","SHA256"],e.calculateMac=function(t){var r=e.generateNormalizedString(t),n=i.algo.HMAC.create(i.algo[t.algorithm],t.key).finalize(r),a=n.toString(i.enc.Base64);return a},e.generateNormalizedString=function(t){var r=t.uri.split("?")[0],n="hawk."+e.headerVersion+"."+t.type+"\n"+t.timestamp+"\n"+t.nonce+"\n"+t.method.toUpperCase()+"\n"+r+"\n"+t.host.toLowerCase()+"\n"+t.port+"\n"+(t.hash||"")+"\n"+(t.ext||"")+"\n";return n},e.calculateHash=function(e,t){if(!i.hasOwnProperty(t)||"function"!=typeof i[t])throw"Unsupported crypto: "+t;var r=i[t](e),n=r.toString(i.enc.Base64);return n},e.base64urlEncode=function(e){return n(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},e.base64urlDecode=function(e){if(e&&!e.match(/^[\w\-]*$/))return Error("Invalid character");try{return i.enc.Base64.parse(e.replace(/-/g,"+").replace(/:/g,"/")).words}catch(t){return t}},e.randomBytes=function(e,t){var r=[];if("object"==typeof window&&window.crypto&&window.crypto.getRandomValues){var n=new Uint8Array(e);window.crypto.getRandomValues(n);for(var a=0;e>a;a++)r.push(n[a])}else for(var r=[];e>0;e--)r.push(Math.floor(256*Math.random()));return t&&t(r),r},e.randomString=function(t){var r=e.randomBits(6*(t+1));if(r instanceof Error)return r;var a=n(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return a.slice(0,t)},e.randomBits=function(t){if(!t||0>t)return a.internal("Invalid random bits count");var r=Math.ceil(t/8);try{return e.randomBytes(r)}catch(n){return a.internal("Failed generating random bits: "+n.message)}},e.fixedTimeComparison=function(e,t){var r=e.length===t.length?0:1;r&&(t=e);for(var n=0,a=e.length;a>n;++n){var i=e.charCodeAt(n),o=t.charCodeAt(n);r+=i===o?0:1}return 0===r}},"cryptoJS.js":function(e,t){var r=e=t.exports=r||function(e,t){var r={},n=r.lib={},a=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=n.WordArray=a.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,a=e.sigBytes;if(this.clamp(),n%4)for(var i=0;a>i;i++){var o=255&r[i>>>2]>>>24-8*(i%4);t[n+i>>>2]|=o<<24-8*((n+i)%4)}else if(r.length>65535)for(var i=0;a>i;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=a,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-8*(r%4),t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;t>n;n+=4)r.push(0|4294967296*e.random());return new i.init(r,t)}}),o=r.enc={},s=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;r>a;a++){var i=255&t[a>>>2]>>>24-8*(a%4);n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new i.init(r,t/2)}},u=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],a=0;r>a;a++){var i=255&t[a>>>2]>>>24-8*(a%4);n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new i.init(r,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,a=r.sigBytes,o=this.blockSize,s=4*o,u=a/s;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*o,h=e.min(4*c,a);if(c){for(var l=0;c>l;l+=o)this._doProcessBlock(n,l);var d=n.splice(0,c);r.sigBytes-=h}return new i.init(d,h)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}});var l=r.algo={};return r}(Math);(function(){var e=r,t=e.lib,n=t.WordArray,a=e.enc;a.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var a=[],i=0;r>i;i+=3)for(var o=255&t[i>>>2]>>>24-8*(i%4),s=255&t[i+1>>>2]>>>24-8*((i+1)%4),u=255&t[i+2>>>2]>>>24-8*((i+2)%4),c=o<<16|s<<8|u,h=0;4>h&&r>i+.75*h;h++)a.push(n.charAt(63&c>>>6*(3-h)));var l=n.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(e){var t=e.length,r=this._map,a=r.charAt(64);if(a){var i=e.indexOf(a);-1!=i&&(t=i)}for(var o=[],s=0,u=0;t>u;u++)if(u%4){var c=r.indexOf(e.charAt(u-1))<<2*(u%4),h=r.indexOf(e.charAt(u))>>>6-2*(u%4);o[s>>>2]|=(c|h)<<24-8*(s%4),s++}return n.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(){var e=r,t=e.lib,n=t.Base,a=e.enc,i=a.Utf8,o=e.algo;o.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,u=o.words,c=0;r>c;c++)s[c]^=1549556828,u[c]^=909522486;a.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();var n=t.finalize(this._oKey.clone().concat(r));return n}})}(),function(){var e=r,t=e.lib,n=t.WordArray,a=t.Hasher,i=e.algo,o=[],s=i.SHA1=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],s=r[3],u=r[4],c=0;80>c;c++){if(16>c)o[c]=0|e[t+c];else{var h=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=h<<1|h>>>31}var l=(n<<5|n>>>27)+u+o[c];l+=20>c?(a&i|~a&s)+1518500249:40>c?(a^i^s)+1859775393:60>c?(a&i|a&s|i&s)-1894007588:(a^i^s)-899497514,u=s,s=i,i=a<<30|a>>>2,a=n,n=l}r[0]=0|r[0]+n,r[1]=0|r[1]+a,r[2]=0|r[2]+i,r[3]=0|r[3]+s,r[4]=0|r[4]+u},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=a._createHelper(s),e.HmacSHA1=a._createHmacHelper(s)}(),function(e){var t=r,n=t.lib,a=n.WordArray,i=n.Hasher,o=t.algo,s=[],u=[];(function(){function t(t){for(var r=e.sqrt(t),n=2;r>=n;n++)if(!(t%n))return!1;return!0}function r(e){return 0|4294967296*(e-(0|e))}for(var n=2,a=0;64>a;)t(n)&&(8>a&&(s[a]=r(e.pow(n,.5))),u[a]=r(e.pow(n,1/3)),a++),n++})();var c=[],h=o.SHA256=i.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],h=r[5],l=r[6],d=r[7],f=0;64>f;f++){if(16>f)c[f]=0|e[t+f];else{var p=c[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=c[f-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[f]=m+c[f-7]+v+c[f-16]}var y=s&h^~s&l,w=n&a^n&i^a&i,x=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),H=d+_+y+u[f]+c[f],S=x+w;d=l,l=h,h=s,s=0|o+H,o=i,i=a,a=n,n=0|H+S}r[0]=0|r[0]+n,r[1]=0|r[1]+a,r[2]=0|r[2]+i,r[3]=0|r[3]+o,r[4]=0|r[4]+s,r[5]=0|r[5]+h,r[6]=0|r[6]+l,r[7]=0|r[7]+d},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,a=8*t.sigBytes;return r[a>>>5]|=128<<24-a%32,r[(a+64>>>9<<4)+14]=e.floor(n/4294967296),r[(a+64>>>9<<4)+15]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(h),t.HmacSHA256=i._createHmacHelper(h)}(Math)},"hawk.js":function(e,t,r){var n=r("./httpError"),a=r("./crypto"),i=r("./utils");e.version="0.7.1",e.crypto=a,e.error=e.Error=n,e.utils=i,e.authenticate=function(e,t,r,o){r.nonceFunc=r.nonceFunc||function(e,t,r){return r()},r.timestampSkewSec=r.timestampSkewSec||60;var s=i.now()+(r.localtimeOffsetMsec||0),u=i.parseRequest(e,r);if(u instanceof Error)return o(n.badRequest(u.message));if(!u.authorization)return o(n.unauthorized(null,"Hawk",{ts:s}));var c=u.authorization.match(/^(\w+)(?:\s+(.*))?$/);if(!c)return o(n.badRequest("Invalid header syntax"));var h=c[1];if("hawk"!==h.toLowerCase())return o(n.unauthorized(null,"Hawk",{ts:s}));var l=c[2];if(!l)return o(n.badRequest("Invalid header syntax"));var d={},f="",p=l.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(e,t,r){return-1===["id","ts","nonce","hash","ext","mac"].indexOf(t)?(f="Unknown attribute: "+t,void 0):null===r.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)?(f="Bad attribute value: "+t,void 0):d.hasOwnProperty(t)?(f="Duplicate attribute: "+t,void 0):(d[t]=r,"")});return""!==p?o(n.badRequest(f||"Bad header format")):d.id&&d.ts&&d.nonce&&d.mac?Math.abs(1e3*d.ts-s)>1e3*r.timestampSkewSec?o(n.unauthorized("Stale timestamp","Hawk",{ts:s}),null,d):(t(d.id,function(e,t){if(e)return o(e,t||null,d);if(!t)return o(n.unauthorized("Unknown credentials","Hawk"),null,d);if(!t.key||!t.algorithm)return o(n.internal("Invalid credentials"),t,d);if(-1===a.algorithms.indexOf(t.algorithm))return o(n.internal("Unknown algorithm"),t,d);var i=a.calculateMac({type:"header",key:t.key,algorithm:t.algorithm,timestamp:d.ts,nonce:d.nonce,method:u.method,uri:u.url,host:u.host,port:u.port,hash:d.hash,ext:d.ext});if(!a.fixedTimeComparison(i,d.mac))return o(n.unauthorized("Bad mac","Hawk"),t,d);if(null!==r.payload&&void 0!==r.payload){if(!d.hash)return o(n.unauthorized("Missing required payload hash","Hawk"),t,d);var s=a.calculateHash(r.payload,t.algorithm);if(!a.fixedTimeComparison(s,d.hash))return o(n.unauthorized("Bad payload hash","Hawk"),t,d)}r.nonceFunc(d.nonce,d.ts,function(e){return e?o(n.unauthorized("Invalid nonce","Hawk"),t,d):o(null,t,d)})}),void 0):o(n.badRequest("Missing attributes"),null,d)},e.getAuthorizationHeader=function(e,t,r,n,o,s){s=s||{},s.ext=null===s.ext||void 0===s.ext?"":s.ext;var u=i.now()+(s.localtimeOffsetMsec||0);if(!e.id||!e.key||!e.algorithm)return"";if(e.algorithm=e.algorithm.toUpperCase(),0>a.algorithms.indexOf(e.algorithm))return"";var c=null;null!==s.payload&&void 0!==s.payload&&(c=a.calculateHash(s.payload,e.algorithm));var h={type:"header",key:e.key,algorithm:e.algorithm,timestamp:s.timestamp||Math.floor(u/1e3),nonce:s.nonce||a.randomString(6),method:t,uri:r,host:n,port:o,hash:c,ext:s.ext},l=a.calculateMac(h),d='Hawk id="'+e.id+'", ts="'+h.timestamp+'", nonce="'+h.nonce+(c?'", hash="'+c:"")+(s.ext?'", ext="'+i.escapeHeaderAttribute(s.ext):"")+'", mac="'+l+'"';return d},e.validatePayload=function(e,t,r){var n=a.calculateHash(e,t.algorithm);return a.fixedTimeComparison(n,r)}},"httpError.js":function(e,t,r){function n(){if(!(this instanceof n))return new n.apply(null,arguments);if(Error.call(this),this.isError=!0,this.response={code:0,payload:{},headers:{}},arguments[0]instanceof Error){var e=arguments[0];this.data=e,this.response.code=e.code||500,e.message&&(this.message=e.message)}else{var t=parseInt(arguments[0],10),r=arguments[1];this.response.code=t,r&&(this.message=r)}return this.reformat(),this}var a=r("./utils");a.inherit(n,Error),n.prototype.reformat=function(){this.response.payload.code=this.response.code,this.response.payload.error=n.STATUS_CODES[this.response.code]||"Unknown",this.message&&(this.response.payload.message=this.message)},n.badRequest=function(e){return new n(400,e)},n.unauthorized=function(e,t,r){var i=new n(401,e);if(!t)return i;var o="";if("string"==typeof t){if(o=t,r)for(var s=Object.keys(r),u=0,c=s.length;c>u;++u){u&&(o+=",");var h=r[s[u]];(null===h||void 0===h)&&(h=""),o+=" "+s[u]+'="'+a.escapeHeaderAttribute(""+h)+'"'}e?(r&&(o+=","),o+=' error="'+a.escapeHeaderAttribute(e)+'"'):i.isMissing=!0}else for(var l=t,u=0,c=l.length;c>u;++u)u&&(o+=", "),o+=l[u];return i.response.headers["WWW-Authenticate"]=o,i},n.clientTimeout=function(e){return new n(408,e)},n.serverTimeout=function(e){return new n(503,e)},n.forbidden=function(e){return new n(403,e)},n.notFound=function(e){return new n(404,e)},n.internal=function(e,t){var r=new n(500,e);return r.data=t,r.response.payload.message="An internal server error occurred",r},n.passThrough=function(e,t,r,a){var i=new n(500,"Pass-through");return i.data={code:e,payload:t,type:r},i.response.code=e,i.response.type=r,i.response.headers=a,i.response.payload=t,i},n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Reserved for WebDAV advanced collections expired proposal",426:"Upgrade Required",427:"Unassigned",428:"Precondition Required",429:"Too Many Requests",430:"Unassigned",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates (Experimental)",507:"Insufficient Storage",508:"Loop Detected",509:"Unassigned",510:"Not Extended",511:"Network Authentication Required"},e=t.exports=n},"utils.js":function(e){e.parseHost=function(e,t){t=t?t.toLowerCase():"host";var r=e.headers[t];if(!r)return null;var n=/^(?:(?:\r\n)?[\t ])*([^:]+)(?::(\d+))?(?:(?:\r\n)?[\t ])*$/,a=r.match(n);return a&&3===a.length&&a[1]?{name:a[1],port:a[2]?a[2]:e.connection&&e.connection.encrypted?443:80}:null},e.parseRequest=function(t,r){if(!t.headers)return t;var n=e.parseHost(t,r.hostHeaderName);if(!n)return Error("Invalid Host header");var t={method:t.method,url:t.url,host:n.name,port:n.port,authorization:t.headers.authorization};return t},e.parseURL=function(e){var t=/^(?:([A-Za-z]+):)(\/{0,3})(?:([^\x00-\x1F\x7F:]+)?:?([^\x00-\x1F\x7F:]*)@)?([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^\x00-\x1F\x7F]+))?$/,r=t.exec(e);if(!r)return!1;var n=/^([\w\-]+)?(?:#([\w\-]+))?(?:\:([\w\-]+))?(?:\?(.*))?$/,a=r[7]?n.exec(r[7]):null;return r?{uriparts:r,protocol:r[1],username:r[3],password:r[4],hostname:r[5],port:r[6],path:a?{first:a[1],hash:a[2],base:a[3],query:a[4],string:r[7]}:r[7]}:!1},e.now=function(){return Date.now()},e.inherit=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},e.escapeHeaderAttribute=function(e){return e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}}}}})("hawk/index")});